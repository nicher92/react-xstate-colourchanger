(this["webpackJsonpxstate-react-typescript-template"]=this["webpackJsonpxstate-react-typescript-template"]||[]).push([[0],{31:function(t,e,o){},40:function(t,e,o){"use strict";o.r(e);var a=o(26),n=o(13),c=o(7),s=(o(31),o(8),o(23)),r=o(20),i=o(2),l=o(43),u=o(44),d=o(11);const p=d.a.send,m=d.a.cancel;function y(t){return p((e=>({type:"SPEAK",value:t})))}function b(t){return{initial:"prompt",states:{prompt:{entry:y(t),on:{ENDSPEECH:"ask"}},ask:{entry:[p("LISTEN"),p("MAXSPEECH",{delay:1e4,id:"maxsp"})]},nomatch:{entry:y("Sorry I cant find what you are looking for"),on:{ENDSPEECH:"prompt"}}}}}function g(t){return{initial:t,states:{names:{entry:y("These are the people available, Tommy, Marina, Saga and John")},days:{entry:y("These are the days available, Friday, Thursday and Wednesday")},times:{entry:y("These are the times available, seven o clock, eight o clock, nine o clock and ten o clock")}}}}const E={Tommy:{person:"Tommy Hertzberg"},Marina:{person:"Marina Noren"},Saga:{person:"Saga Nilsson"},John:{person:"John Appleseed"},Jon:{person:"John Appleseed"},"on Friday":{day:"Friday"},Friday:{day:"Friday"},Thursday:{day:"Thursday"},"on Thursday":{day:"Thursday"},Wednesday:{day:"Wednesday"},"on Wednesday":{day:"Wednesday"},"at nine":{time:"9"},nine:{time:"9"},"nine o clock":{time:"9"},seven:{time:"7"},"seven o clock":{time:"7"},"at eight":{time:"8"},eight:{time:"8"},"eight o clock":{time:"8"},"at ten":{time:"10"},tenn:{time:"10"},"ten o clock":{time:"10"},ten:{time:"10"}},h={ya:{tru:"yes"},ja:{tru:"yes"},yes:{tru:"yes"},yeah:{tru:"yes"},ya:{tru:"yes"},ok:{tru:"yes"},okay:{tru:"yes"},sure:{tru:"yes"},no:{fal:"no"},nope:{fal:"no"},nah:{fal:"no"},"no way":{fal:"no"},nej:{fal:"no"}},S={"Go back":{goback:"go back"},previous:{goback:"go back"},"previous stage":{goback:"go back"},back:{goback:"go back"},"back up":{goback:"go back"},return:{goback:"go back"}},O=p((t=>({type:"SPEAK",value:"".concat(t.Input)}))),k={initial:"init",states:{init:{entry:Object(i.b)({count:t=>t.count=0}),on:{CLICK:"topstate"}},topstate:{initial:"askUser",on:{RECOGNISED:{target:"#root.dm.help",actions:m("maxsp"),cond:t=>"help"===t.recResult}},states:{hist:{type:"history",history:"shallow"},askUser:Object(c.a)({on:{RECOGNISED:[{target:"query",actions:[m("maxsp"),Object(i.b)((t=>({query:t.recResult})))],cond:t=>!("help"===t.recResult)},{target:"#root.dm.nomatch1",cond:t=>!("help"===t.recResult),actions:m("maxsp")}]}},b("what would you like to do?")),query:{invoke:{id:"NLU",src:(t,e)=>{return o=t.query,fetch(new Request("https://cors-anywhere.herokuapp.com/https://meeting-maker.herokuapp.com/model/parse",{method:"POST",headers:{Origin:"http://localhost:3000/react-xstate-colourchanger"},body:'{"text": "'.concat(o,'"}')})).then((t=>t.json()));var o},onDone:{target:"middlestate",actions:[Object(i.b)(((t,e)=>({Input:e.data.intent.name}))),(t,e)=>O||{}]},onError:{target:"#root.dm.init",actions:(t,e)=>console.log(e.data)}}},middlestate:{always:[{target:"timer",cond:(t,e)=>"timer"===t.Input},{target:"appointment",cond:(t,e)=>"appointment"===t.Input},{target:"todo",cond:(t,e)=>"to do"===t.Input},{target:"nomatch"}]},nomatch:{on:{ENDSPEECH:"askUser"},entry:y("sorry, that option is not available, please try again")},todo:{on:{ENDSPEECH:"#root.dm.init"},entry:y("welcome to the to do state")},timer:{on:{ENDSPEECH:"#root.dm.init"},entry:y("welcome to the timer state")},appointment:{initial:"prompt",on:{ENDSPEECH:"who"},states:{prompt:{entry:y("Let's create an appointment")}}},who:{initial:"one",on:{RECOGNISED:[{cond:t=>"person"in(E[t.recResult]||{}),actions:[m("maxsp"),Object(i.b)((t=>({person:E[t.recResult].person})))],target:"day"},{cond:t=>"goback"in(S[t.recResult]||{}),actions:Object(i.b)((t=>({goback:S[t.recResult].goback}))),target:"askUser"},{target:"#root.dm.nomatch2",cond:t=>!("help"===t.recResult),actions:m("maxsp")}],MAXSPEECH:{actions:[t=>console.log("".concat(t.count)),Object(i.b)({count:t=>t.count+1})],target:"init",cond:t=>t.count<3,target:"#root.dm.nomatch2"}},states:{one:Object(c.a)(Object(c.a)({},g("names")),{},{on:{ENDSPEECH:"two"}}),two:Object(c.a)({},b("Who are you meeting with")),nomatch:{entry:y("Sorry, that person is not available"),on:{ENDSPEECH:"one"}}}},day:{initial:"prompt",on:{ENDSPEECH:"listener"},states:{prompt:{entry:p((t=>({type:"SPEAK",value:"OK, you want to meet ".concat(t.person)})))}}},listener:{initial:"one",on:{RECOGNISED:[{cond:t=>"day"in(E[t.recResult]||{}),actions:[m("maxsp"),Object(i.b)((t=>({day:E[t.recResult].day})))],target:"question"},{cond:t=>"goback"in(S[t.recResult]||{}),actions:Object(i.b)((t=>({goback:S[t.recResult].goback}))),target:"who"},{target:"#root.dm.nomatch3",cond:t=>!("help"===t.recResult),actions:m("maxsp")}],MAXSPEECH:{actions:[t=>console.log("".concat(t.count)),Object(i.b)({count:t=>t.count+1})],target:"init",cond:t=>t.count<3,target:"#root.dm.nomatch3"}},states:{one:Object(c.a)(Object(c.a)({},g("days")),{},{on:{ENDSPEECH:"two"}}),two:Object(c.a)({},b("On which day is your meeting"))}},question:{initial:"first",on:{RECOGNISED:[{cond:t=>"tru"in(h[t.recResult]||{}),actions:[m("maxsp"),Object(i.b)((t=>({tru:h[t.recResult].tru})))],target:"wholeDayFinal"},{cond:t=>"fal"in(h[t.recResult]||{}),actions:[m("maxsp"),Object(i.b)((t=>({fal:h[t.recResult].fal})))],target:"partDay"},{target:"#root.dm.nomatch1",cond:t=>!("help"===t.recResult),actions:m("maxsp")}],MAXSPEECH:{actions:[t=>console.log("".concat(t.count)),Object(i.b)({count:t=>t.count+1})],target:"init",cond:t=>t.count<3,target:"#root.dm.nomatch1"}},states:{first:{entry:y("will the appointment take the entire day"),on:{ENDSPEECH:"ask"}},ask:{entry:[p("LISTEN"),p("MAXSPEECH",{delay:5e3,id:"maxsp"})]}}},partDay:{initial:"one",on:{RECOGNISED:[{cond:t=>"time"in(E[t.recResult]||{}),actions:[m("maxsp"),Object(i.b)((t=>({time:E[t.recResult].time})))],target:"partDayFinal"},{cond:t=>"goback"in(S[t.recResult]||{}),actions:Object(i.b)((t=>({goback:S[t.recResult].goback}))),target:"question"},{target:"#root.dm.nomatch4",cond:t=>!("help"===t.recResult),actions:m("maxsp")}],MAXSPEECH:{actions:[t=>console.log("".concat(t.count)),Object(i.b)({count:t=>t.count+1})],target:"init",cond:t=>t.count<3,target:"#root.dm.nomatch4"}},states:{one:Object(c.a)(Object(c.a)({},g("times")),{},{on:{ENDSPEECH:"two"}}),two:Object(c.a)({},b("At what time is your meeting?"))}},wholeDayFinal:{initial:"first",on:{RECOGNISED:[{cond:t=>"tru"in(h[t.recResult]||{}),actions:[m("maxsp"),Object(i.b)((t=>({tru:h[t.recResult].tru})))],target:"#root.dm.endstate"},{cond:t=>"goback"in(S[t.recResult]||{}),actions:Object(i.b)((t=>({goback:S[t.recResult].goback}))),target:"question"},{cond:t=>"fal"in(h[t.recResult]||{}),actions:[m("maxsp"),Object(i.b)((t=>({fal:h[t.recResult].fal})))],target:"#root.dm.init"},{target:"#root.dm.nomatch1",cond:t=>!("help"===t.recResult),actions:m("maxsp")}],MAXSPEECH:{actions:[t=>console.log("".concat(t.count)),Object(i.b)({count:t=>t.count+1})],target:"init",cond:t=>t.count<3,target:"#root.dm.nomatch1"}},states:{first:{entry:p((t=>({type:"SPEAK",value:"OK, you want to meet ".concat(t.person," on ").concat(t.day," the entire day")}))),on:{ENDSPEECH:"ask"}},ask:{entry:[p("LISTEN"),p("MAXSPEECH",{delay:5e3,id:"maxsp"})]},nomatch:{entry:y("Please repeat yourself"),on:{ENDSPEECH:"first"}}}},partDayFinal:{initial:"first",on:{RECOGNISED:[{cond:t=>"tru"in(h[t.recResult]||{}),actions:[m("maxsp"),Object(i.b)((t=>({tru:h[t.recResult].tru})))],target:"#root.dm.endstate"},{cond:t=>"goback"in(S[t.recResult]||{}),actions:Object(i.b)((t=>({goback:S[t.recResult].goback}))),target:"question"},{cond:t=>"fal"in(h[t.recResult]||{}),actions:[m("maxsp"),Object(i.b)((t=>({fal:h[t.recResult].fal})))],target:"#root.dm.init"},{target:"#root.dm.nomatch1",cond:t=>!("help"===t.recResult),actions:m("maxsp")}],MAXSPEECH:{actions:[t=>console.log("".concat(t.count)),Object(i.b)({count:t=>t.count+1})],target:"init",cond:t=>t.count<3,target:"#root.dm.nomatch1"}},states:{first:{entry:p((t=>({type:"SPEAK",value:"OK, you want to meet ".concat(t.person," on ").concat(t.day," at ").concat(t.time)}))),on:{ENDSPEECH:"ask"}},ask:{entry:[p("LISTEN"),p("MAXSPEECH",{delay:5e3,id:"maxsp"})]}}}}},nomatch1:{entry:y("Please repeat yourself"),on:{ENDSPEECH:"#root.dm.topstate.hist"}},nomatch2:{entry:y("Sorry, that person is not available"),on:{ENDSPEECH:"#root.dm.topstate.hist"}},nomatch3:{entry:y("Sorry, that day is not available"),on:{ENDSPEECH:"#root.dm.topstate.hist"}},nomatch4:{entry:y("Sorry, that time is not available"),on:{ENDSPEECH:"#root.dm.topstate.hist"}},help:{entry:y("sorry buddy, i will just send you back"),on:{ENDSPEECH:"#root.dm.topstate.hist"}},endstate:{entry:y("your appointment has been created"),type:"final"}}};var j=o(22);Object(u.a)({url:"https://statecharts.io/inspect",iframe:!1});const R=Object(r.a)({id:"root",type:"parallel",states:{dm:Object(c.a)({},k),asrtts:{initial:"idle",states:{idle:{on:{LISTEN:"recognising",SPEAK:{target:"speaking",actions:Object(i.b)(((t,e)=>({ttsAgenda:e.value})))}}},recognising:{initial:"progress",entry:"recStart",exit:"recStop",on:{ASRRESULT:{actions:["recLogResult",Object(i.b)(((t,e)=>({recResult:e.value})))],target:".match"},RECOGNISED:"idle",MAXSPEECH:"idle"},states:{progress:{},match:{entry:Object(i.q)("RECOGNISED")}}},speaking:{entry:"ttsStart",on:{ENDSPEECH:"idle"}}}}}},{actions:{recLogResult:t=>{console.log("<< ASR: "+t.recResult)},test:()=>{console.log("test")},logIntent:t=>{console.log("<< NLU intent: "+t.nluData.intent.name)}}}),C=t=>{switch(!0){case t.state.matches({asrtts:"recognising"}):return Object(n.jsx)("button",Object(c.a)(Object(c.a)({type:"button",className:"glow-on-hover",style:{animation:"glowing 20s linear"}},t),{},{children:"Listening..."}));case t.state.matches({asrtts:"speaking"}):return Object(n.jsx)("button",Object(c.a)(Object(c.a)({type:"button",className:"glow-on-hover",style:{animation:"bordering 1s infinite"}},t),{},{children:"Speaking..."}));default:return Object(n.jsx)("button",Object(c.a)(Object(c.a)({type:"button",className:"glow-on-hover"},t),{},{children:"Click to start"}))}};function N(){const t=Object(j.useSpeechSynthesis)({onEnd:()=>{p("ENDSPEECH")}}),e=t.speak,o=t.cancel,c=(t.speaking,Object(j.useSpeechRecognition)({onResult:t=>{p({type:"ASRRESULT",value:t})}})),s=c.listen,r=(c.listening,c.stop),i=Object(l.b)(R,{devTools:!0,actions:{recStart:Object(l.a)((()=>{console.log("Ready to receive a color command."),s({interimResults:!1,continuous:!0})})),recStop:Object(l.a)((()=>{console.log("Recognition stopped."),r()})),changeColour:Object(l.a)((t=>{console.log("Repainting..."),document.body.style.background=t.recResult})),ttsStart:Object(l.a)(((t,o)=>{console.log("Speaking..."),e({text:t.ttsAgenda})})),ttsCancel:Object(l.a)(((t,e)=>{console.log("TTS STOP..."),o()}))}}),u=Object(a.a)(i,3),d=u[0],p=u[1];u[2];return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(C,{state:d,onClick:()=>p("CLICK")})})}const P=document.getElementById("root");s.render(Object(n.jsx)(N,{}),P)}},[[40,1,2]]]);
//# sourceMappingURL=main.3c12d61e.chunk.js.map