(this["webpackJsonpxstate-react-typescript-template"]=this["webpackJsonpxstate-react-typescript-template"]||[]).push([[0],{26:function(t,e,a){},35:function(t,e,a){"use strict";a.r(e);var n=a(23),o=a(12),s=a(7),c=(a(26),a(8),a(20)),r=a(41),i=a(4),l=a(40),u=a(39);function y(t){return Object(i.k)((e=>({type:"SPEAK",value:t})))}function b(){return Object(i.k)("LISTEN")}function d(t){return{initial:"prompt",states:{prompt:{entry:y(t),on:{ENDSPEECH:"ask"}},ask:{entry:b()},nomatch:{entry:y("Sorry I cant find what you are looking for"),on:{ENDSPEECH:"prompt"}}}}}function p(t){return{initial:t,states:{names:{entry:y("These are the people available, Tommy, Marina, Saga and John")},days:{entry:y("These are the days available, Friday, Thursday and Wednesday")},times:{entry:y("These are the times available, seven o clock, eight o clock, nine o clock and ten o clock")}}}}const g={Tommy:{person:"Tommy Hertzberg"},Marina:{person:"Marina Noren"},Saga:{person:"Saga Nilsson"},John:{person:"John Appleseed"},Jon:{person:"John Appleseed"},"on Friday":{day:"Friday"},Friday:{day:"Friday"},Thursday:{day:"Thursday"},"on Thursday":{day:"Thursday"},Wednesday:{day:"Wednesday"},"on Wednesday":{day:"Wednesday"},"at nine":{time:"9"},nine:{time:"9"},"nine o clock":{time:"9"},seven:{time:"7"},"seven o clock":{time:"7"},"at eight":{time:"8"},eight:{time:"8"},"eight o clock":{time:"8"},"at ten":{time:"10"},tenn:{time:"10"},"ten o clock":{time:"10"},ten:{time:"10"}},m={ya:{tru:"yes"},ja:{tru:"yes"},yes:{tru:"yes"},yeah:{tru:"yes"},ya:{tru:"yes"},ok:{tru:"yes"},okay:{tru:"yes"},sure:{tru:"yes"},no:{fal:"no"},nope:{fal:"no"},nah:{fal:"no"},"no way":{fal:"no"},nej:{fal:"no"}},E={"Go back":{goback:"go back"},previous:{goback:"go back"},"previous stage":{goback:"go back"},back:{goback:"go back"},"back up":{goback:"go back"},return:{goback:"go back"}},h=Object(i.k)((t=>({type:"SPEAK",value:"".concat(t.Input)}))),k={initial:"init",states:{init:{on:{CLICK:"askUser"}},askUser:Object(s.a)({on:{RECOGNISED:{target:"query",actions:Object(i.b)((t=>({query:t.recResult})))}}},d("what would you like to do?")),query:{invoke:{id:"NLU",src:(t,e)=>{return a=t.query,fetch(new Request("https://cors-anywhere.herokuapp.com/https://meeting-maker.herokuapp.com/model/parse",{method:"POST",headers:{Origin:"http://localhost:3000/react-xstate-colourchanger"},body:'{"text": "'.concat(a,'"}')})).then((t=>t.json()));var a},onDone:{target:"middlestate",actions:[Object(i.b)(((t,e)=>({Input:e.data.intent.name}))),(t,e)=>h||{}]},onError:{target:"init",actions:(t,e)=>console.log(e.data)}}},middlestate:{always:[{target:"timer",cond:(t,e)=>"timer"===t.Input},{target:"appointment",cond:(t,e)=>"appointment"===t.Input},{target:"todo",cond:(t,e)=>"to do"===t.Input},{target:"nomatch"}]},nomatch:{on:{ENDSPEECH:"askUser"},entry:y("sorry, that option is not available, please try again")},todo:{on:{ENDSPEECH:"init"},entry:y("welcome to the to do state")},timer:{on:{ENDSPEECH:"init"},entry:y("welcome to the timer state")},appointment:{initial:"prompt",on:{ENDSPEECH:"who"},states:{prompt:{entry:y("Let's create an appointment")}}},who:{initial:"one",on:{RECOGNISED:[{cond:t=>"person"in(g[t.recResult]||{}),actions:Object(i.b)((t=>({person:g[t.recResult].person}))),target:"day"},{cond:t=>"goback"in(E[t.recResult]||{}),actions:Object(i.b)((t=>({goback:E[t.recResult].goback}))),target:"askUser"},{target:".nomatch"}]},states:{one:Object(s.a)(Object(s.a)({},p("names")),{},{on:{ENDSPEECH:"two"}}),two:Object(s.a)({},d("Who are you meeting with")),nomatch:{entry:y("Sorry, that person is not available"),on:{ENDSPEECH:"one"}}}},day:{initial:"prompt",on:{ENDSPEECH:"listener"},states:{prompt:{entry:Object(i.k)((t=>({type:"SPEAK",value:"OK, you want to meet ".concat(t.person)})))}}},listener:{initial:"one",on:{RECOGNISED:[{cond:t=>"day"in(g[t.recResult]||{}),actions:Object(i.b)((t=>({day:g[t.recResult].day}))),target:"question"},{cond:t=>"goback"in(E[t.recResult]||{}),actions:Object(i.b)((t=>({goback:E[t.recResult].goback}))),target:"who"},{target:".nomatch"}]},states:{one:Object(s.a)(Object(s.a)({},p("days")),{},{on:{ENDSPEECH:"two"}}),two:Object(s.a)({},d("On which day is your meeting")),nomatch:{entry:y("Sorry, that day is not available"),on:{ENDSPEECH:"one"}}}},question:{initial:"first",on:{RECOGNISED:[{cond:t=>"tru"in(m[t.recResult]||{}),actions:Object(i.b)((t=>({tru:m[t.recResult].tru}))),target:"wholeDayFinal"},{cond:t=>"fal"in(m[t.recResult]||{}),actions:Object(i.b)((t=>({fal:m[t.recResult].fal}))),target:"partDay"},{target:".nomatch"}]},states:{first:{entry:y("will the appointment take the entire day"),on:{ENDSPEECH:"ask"}},ask:{entry:b()},nomatch:{entry:y("Please repeat yourself"),on:{ENDSPEECH:"first"}}}},partDay:{initial:"one",on:{RECOGNISED:[{cond:t=>"time"in(g[t.recResult]||{}),actions:Object(i.b)((t=>({time:g[t.recResult].time}))),target:"partDayFinal"},{cond:t=>"goback"in(E[t.recResult]||{}),actions:Object(i.b)((t=>({goback:E[t.recResult].goback}))),target:"question"},{target:".nomatch"}]},states:{one:Object(s.a)(Object(s.a)({},p("times")),{},{on:{ENDSPEECH:"two"}}),two:Object(s.a)({},d("At what time is your meeting?")),nomatch:{entry:y("Please repeat yourself"),on:{ENDSPEECH:"one"}}}},wholeDayFinal:{initial:"first",on:{RECOGNISED:[{cond:t=>"tru"in(m[t.recResult]||{}),actions:Object(i.b)((t=>({tru:m[t.recResult].tru}))),target:"#root.dm.endstate"},{cond:t=>"goback"in(E[t.recResult]||{}),actions:Object(i.b)((t=>({goback:E[t.recResult].goback}))),target:"question"},{cond:t=>"fal"in(m[t.recResult]||{}),actions:Object(i.b)((t=>({fal:m[t.recResult].fal}))),target:"#root.dm.init"},{target:".nomatch"}]},states:{first:{entry:Object(i.k)((t=>({type:"SPEAK",value:"OK, you want to meet ".concat(t.person," on ").concat(t.day," the entire day")}))),on:{ENDSPEECH:"ask"}},ask:{entry:b()},nomatch:{entry:y("Please repeat yourself"),on:{ENDSPEECH:"first"}}}},partDayFinal:{initial:"first",on:{RECOGNISED:[{cond:t=>"tru"in(m[t.recResult]||{}),actions:Object(i.b)((t=>({tru:m[t.recResult].tru}))),target:"#root.dm.endstate"},{cond:t=>"goback"in(E[t.recResult]||{}),actions:Object(i.b)((t=>({goback:E[t.recResult].goback}))),target:"question"},{cond:t=>"fal"in(m[t.recResult]||{}),actions:Object(i.b)((t=>({fal:m[t.recResult].fal}))),target:"#root.dm.init"}]},states:{first:{entry:Object(i.k)((t=>({type:"SPEAK",value:"OK, you want to meet ".concat(t.person," on ").concat(t.day," at ").concat(t.time)}))),on:{ENDSPEECH:"ask"}},ask:{entry:b()},nomatch:{entry:y("Please repeat yourself"),on:{ENDSPEECH:"first"}}}},endstate:{entry:y("your appointment has been created"),type:"final"}}};var O=a(19);Object(u.a)({url:"https://statecharts.io/inspect",iframe:!1});const j=Object(r.a)({id:"root",type:"parallel",states:{dm:Object(s.a)({},k),asrtts:{initial:"idle",states:{idle:{on:{LISTEN:"recognising",SPEAK:{target:"speaking",actions:Object(i.b)(((t,e)=>({ttsAgenda:e.value})))}}},recognising:{entry:"recStart",exit:"recStop",on:{ASRRESULT:{actions:["recLogResult",Object(i.b)(((t,e)=>({recResult:e.value})))],target:".match"},RECOGNISED:"idle"},states:{match:{entry:Object(i.k)("RECOGNISED")}}},speaking:{entry:"ttsStart",on:{ENDSPEECH:"idle"}}}}}},{actions:{recLogResult:t=>{console.log("<< ASR: "+t.recResult)},test:()=>{console.log("test")},logIntent:t=>{console.log("<< NLU intent: "+t.nluData.intent.name)}}}),S=t=>{switch(!0){case t.state.matches({asrtts:"recognising"}):return Object(o.jsx)("button",Object(s.a)(Object(s.a)({type:"button",className:"glow-on-hover",style:{animation:"glowing 20s linear"}},t),{},{children:"Listening..."}));case t.state.matches({asrtts:"speaking"}):return Object(o.jsx)("button",Object(s.a)(Object(s.a)({type:"button",className:"glow-on-hover",style:{animation:"bordering 1s infinite"}},t),{},{children:"Speaking..."}));default:return Object(o.jsx)("button",Object(s.a)(Object(s.a)({type:"button",className:"glow-on-hover"},t),{},{children:"Click to start"}))}};function R(){const t=Object(O.useSpeechSynthesis)({onEnd:()=>{b("ENDSPEECH")}}),e=t.speak,a=t.cancel,s=(t.speaking,Object(O.useSpeechRecognition)({onResult:t=>{b({type:"ASRRESULT",value:t})}})),c=s.listen,r=(s.listening,s.stop),i=Object(l.b)(j,{devTools:!0,actions:{recStart:Object(l.a)((()=>{console.log("Ready to receive a color command."),c({interimResults:!1,continuous:!0})})),recStop:Object(l.a)((()=>{console.log("Recognition stopped."),r()})),changeColour:Object(l.a)((t=>{console.log("Repainting..."),document.body.style.background=t.recResult})),ttsStart:Object(l.a)(((t,a)=>{console.log("Speaking..."),e({text:t.ttsAgenda})})),ttsCancel:Object(l.a)(((t,e)=>{console.log("TTS STOP..."),a()}))}}),u=Object(n.a)(i,3),y=u[0],b=u[1];u[2];return Object(o.jsx)("div",{className:"App",children:Object(o.jsx)(S,{state:y,onClick:()=>b("CLICK")})})}const f=document.getElementById("root");c.render(Object(o.jsx)(R,{}),f)}},[[35,1,2]]]);
//# sourceMappingURL=main.4e140866.chunk.js.map